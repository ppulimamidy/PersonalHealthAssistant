# ===========================================
# MVP API - Development Configuration
# ===========================================

# Sandbox Mode (RECOMMENDED for development)
# Set to true to use mock Oura data without real API credentials
USE_SANDBOX=true

# ===========================================
# REQUIRED: Database Configuration
# ===========================================
DATABASE_URL=postgresql://postgres:changeme@localhost:5432/health_assistant

# ===========================================
# REQUIRED: JWT/Auth Configuration
# ===========================================
# Used to validate platform JWTs. Supabase JWTs can also be validated by setting
# SUPABASE_JWT_SECRET (recommended if frontend uses Supabase Auth).
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production
JWT_ALGORITHM=HS256

# Supabase JWT (if using Supabase auth)
# If your project uses the newer Supabase "JWT Signing Keys" (ES256/RS256), you may not
# have a usable shared secret anymore. In that case, set SUPABASE_URL and/or SUPABASE_JWKS_URL
# so the backend can verify tokens via JWKS.
SUPABASE_JWT_SECRET=your-supabase-jwt-secret
# SUPABASE_URL=https://<project-ref>.supabase.co
# SUPABASE_ISSUER=https://<project-ref>.supabase.co/auth/v1
# SUPABASE_JWKS_URL=https://<project-ref>.supabase.co/auth/v1/.well-known/jwks.json
SUPABASE_JWKS_CACHE_TTL_S=600

# ===========================================
# OPTIONAL: Oura Integration (Production Only)
# Leave empty/commented for sandbox mode
# ===========================================
# OURA_CLIENT_ID=your-oura-client-id
# OURA_CLIENT_SECRET=your-oura-client-secret
# OURA_REDIRECT_URI=http://localhost:3000/api/oura/callback
# OURA_ACCESS_TOKEN=user-access-token-from-oauth

# ===========================================
# OPTIONAL: Nutrition Service Integration
# ===========================================
# If you run the Nutrition service locally on port 8007:
NUTRITION_SERVICE_URL=http://localhost:8007

# If you're using Supabase Auth, the MVP API may need a Supabase API key to validate
# access tokens via the Auth `/user` endpoint (fallback when local JWKS validation fails).
# Prefer the new publishable key (starts with `sb_publishable_`).
# SUPABASE_PUBLISHABLE_KEY=sb_publishable_...

# ===========================================
# OPTIONAL: OpenAI for AI Insights (Production)
# Sandbox mode generates rule-based insights
# ===========================================
# OPENAI_API_KEY=your-openai-api-key

# ===========================================
# OPTIONAL: Advanced Insights (AI Insights + Knowledge Graph)
# When enabled, MVP `/api/v1/insights` will call these services to generate
# clinical-style explanations and suggested clinician questions.
# ===========================================
# ADVANCED_INSIGHTS_ENABLED=false
# AI_INSIGHTS_URL=http://localhost:8200
# KNOWLEDGE_GRAPH_URL=http://localhost:8010
# ADVANCED_INSIGHTS_TIMEOUT_S=6.0

# ===========================================
# Logging Configuration
# ===========================================
LOG_LEVEL=INFO

# ===========================================
# OPTIONAL: Stripe Billing
# ===========================================
# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_...
# STRIPE_PRICE_PRO=price_...
# STRIPE_PRICE_PRO_PLUS=price_...
# FRONTEND_URL=http://localhost:3000

# NOTE: USDA API key is used by the Nutrition service (apps/nutrition), not the MVP API.
# Set `USDA_API_KEY` in the Nutrition service environment (see `apps/nutrition/.env.example`).
